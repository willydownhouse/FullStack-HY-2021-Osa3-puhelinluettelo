(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(14),a=n.n(s),u=n(3),o=n(0),i=function(e){var t=e.message,n=e.errorMessage;return t||n?t?Object(o.jsx)("div",{className:"ui green message",children:t}):Object(o.jsx)("div",{className:"ui error message",children:n}):null},r=function(e){var t=e.filter,n=e.setFilter,c=e.placeholder;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"ui input",children:Object(o.jsx)("input",{value:t,type:"text",onChange:function(e){return n(e.target.value)},placeholder:c})}),Object(o.jsx)("div",{className:"ui hidden divider"})]})},l=n(4),d=n.n(l),j="/api/persons",m=function(){return d.a.get(j).then((function(e){return e.data}))},b=function(e){return d.a.post(j,e).then((function(e){return e.data}))},h=function(e,t){return d.a.put("".concat(j,"/").concat(e),t).then((function(e){return e.data}))},f=function(e){return d.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},O=function(e){var t=e.phoneBook,n=e.setPhoneBook,c=e.newName,s=e.setNewName,a=e.phoneNumber,u=e.setPhoneNumber,i=e.setErrorMessage,r=e.setSuccessMessage;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("form",{className:"ui form",onSubmit:function(e){if(e.preventDefault(),!t.map((function(e){return e.name})).includes(c))return b({name:c,number:a}).then((function(e){n(t.concat(e.data)),r("New number created succesfully!"),setTimeout((function(){r(null)}),5e3)})).catch((function(e){console.log(e),i("Couldnt add ".concat(c," to the phonebook, please try again!")),setTimeout((function(){i(null)}),5e3)})),s(""),void u("");if(window.confirm("".concat(c," is already in the phonebook, do you want to replace the old number with the new one"))){var o=t.find((function(e){return e.name===c}));h(o.id,{name:c,number:a}).then((function(e){n(t.map((function(t){return t.id!==e.data.id?t:e.data}))),r("Number updated succesfully!"),setTimeout((function(){r(null)}),5e3)})).catch((function(e){console.log(e),i("Couldnt update ".concat(c,"s number, please try again!")),setTimeout((function(){i(null)}),5e3)})),s(""),u("")}},children:[Object(o.jsxs)("div",{className:"field",children:[Object(o.jsx)("label",{children:"Name"}),Object(o.jsx)("input",{value:c,onChange:function(e){return s(e.target.value)}})]}),Object(o.jsxs)("div",{className:"field",children:[Object(o.jsx)("label",{children:"Phonenumber"}),Object(o.jsx)("input",{value:a,onChange:function(e){return u(e.target.value)}})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{className:"ui button secondary",type:"submit",children:"Add"})})]}),Object(o.jsx)("div",{className:"ui hidden divider"})]})},p=function(e){var t=e.title,n=e.phoneBook,c=e.filter,s=e.setPhoneBook,a=e.setSuccessMessage;return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{className:"ui header",children:t}),Object(o.jsx)("div",{className:"ui middle aligned divided list",children:n.map((function(e){return e.name.toLowerCase().includes(c)?Object(o.jsxs)("div",{className:"item",children:[Object(o.jsx)("div",{className:"right floated content",children:Object(o.jsx)("div",{onClick:function(){return function(e){window.confirm("Are you sure you want to delete ".concat(e.name," from phonebook?"))&&(f(e.id),s(n.filter((function(t){return t.id!==e.id}))),a("Number deleted succesfully!"),setTimeout((function(){a(null)}),3e3))}(e)},className:"ui button",children:"Delete"})}),Object(o.jsxs)("div",{className:"content",children:[e.name," ",e.number?e.number:"No phonenumber"]})]},e.name):null}))})]})},v=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(""),l=Object(u.a)(a,2),d=l[0],j=l[1],b=Object(c.useState)(""),h=Object(u.a)(b,2),f=h[0],v=h[1],N=Object(c.useState)(""),x=Object(u.a)(N,2),g=x[0],w=x[1],k=Object(c.useState)(null),y=Object(u.a)(k,2),S=y[0],B=y[1],M=Object(c.useState)(null),P=Object(u.a)(M,2),C=P[0],T=P[1];return Object(c.useEffect)((function(){m().then((function(e){s(e.data)})).catch((function(e){B(e.message),setTimeout((function(){B(null)}),5e3)}))}),[]),Object(o.jsxs)("div",{className:"ui container",children:[Object(o.jsx)("h1",{className:"ui header",children:"Phonebook"}),Object(o.jsx)(r,{placeholder:"Filter names...",filter:g,setFilter:w}),Object(o.jsx)(O,{phoneBook:n,setPhoneBook:s,newName:d,setNewName:j,phoneNumber:f,setPhoneNumber:v,setErrorMessage:B,setSuccessMessage:T}),Object(o.jsx)(i,{message:C,errorMessage:S}),Object(o.jsx)(p,{title:"Numbers",filter:g,phoneBook:n,setPhoneBook:s,setSuccessMessage:T})]})};a.a.render(Object(o.jsx)(v,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.18edeb7b.chunk.js.map