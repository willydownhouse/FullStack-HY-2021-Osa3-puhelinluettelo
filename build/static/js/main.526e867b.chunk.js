(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n(14),a=n.n(c),o=n(3),i=n(0),u=function(e){var t=e.message,n=e.errorMessage;return t||n?t?Object(i.jsx)("div",{className:"ui green message",children:t}):Object(i.jsx)("div",{className:"ui error message",children:n}):null},r=function(e){var t=e.filter,n=e.setFilter,s=e.placeholder;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:"ui input",children:Object(i.jsx)("input",{value:t,type:"text",onChange:function(e){return n(e.target.value)},placeholder:s})}),Object(i.jsx)("div",{className:"ui hidden divider"})]})},l=n(4),d=n.n(l),m="/api/persons",j=function(){return d.a.get(m).then((function(e){return e.data}))},b=function(e){return d.a.post(m,e).then((function(e){return e.data}))},h=function(e,t){return d.a.put("".concat(m,"/").concat(e),t).then((function(e){return e.data}))},f=function(e){return d.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},p=function(e){var t=e.phoneBook,n=e.setPhoneBook,s=e.newName,c=e.setNewName,a=e.phoneNumber,o=e.setPhoneNumber,u=e.setErrorMessage,r=e.setSuccessMessage;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("form",{className:"ui form",onSubmit:function(e){if(e.preventDefault(),!t.map((function(e){return e.name})).includes(s))return b({name:s,number:a}).then((function(e){n(t.concat(e.data)),r("New number created succesfully!"),setTimeout((function(){r(null)}),5e3)})).catch((function(e){console.log(e.response.data),e.response.data.message?u(e.response.data.message):u("Couldnt add ".concat(s," to the phonebook, please try again!")),setTimeout((function(){u(null)}),5e3)})),c(""),void o("");if(window.confirm("".concat(s," is already in the phonebook, do you want to replace the old number with the new one"))){var i=t.find((function(e){return e.name===s}));h(i._id,{name:s,number:a}).then((function(e){n(t.map((function(t){return t._id!==e.data._id?t:e.data}))),r("Number updated succesfully!"),setTimeout((function(){r(null)}),5e3)})).catch((function(e){console.log(e.response.data),e.response.data.message?u(e.response.data.message):u("Couldnt update ".concat(s,"s number, please try again!")),setTimeout((function(){u(null)}),5e3)})),c(""),o("")}},children:[Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{children:"Name"}),Object(i.jsx)("input",{id:"nimi",value:s,onChange:function(e){return c(e.target.value)}})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{children:"Phonenumber"}),Object(i.jsx)("input",{id:"number",value:a,onChange:function(e){return o(e.target.value)}})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{id:"add",className:"ui button secondary",type:"submit",children:"Add"})})]}),Object(i.jsx)("div",{className:"ui hidden divider"})]})},O=function(e){var t=e.title,n=e.phoneBook,s=e.filter,c=e.setPhoneBook,a=e.setSuccessMessage;return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{className:"ui header",children:t}),Object(i.jsx)("div",{className:"ui middle aligned divided list",children:n.map((function(e){return e.name.toLowerCase().includes(s)?Object(i.jsxs)("div",{className:"item",children:[Object(i.jsx)("div",{className:"right floated content",children:Object(i.jsx)("div",{onClick:function(){return function(e){window.confirm("Are you sure you want to delete ".concat(e.name," from phonebook?"))&&(f(e._id),c(n.filter((function(t){return t._id!==e._id}))),a("Number deleted succesfully!"),setTimeout((function(){a(null)}),3e3))}(e)},className:"ui button",children:"Delete"})}),Object(i.jsxs)("div",{className:"content",children:[e.name," ",e.number?e.number:"No phonenumber"]})]},e.name):null}))})]})},g=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(""),l=Object(o.a)(a,2),d=l[0],m=l[1],b=Object(s.useState)(""),h=Object(o.a)(b,2),f=h[0],g=h[1],v=Object(s.useState)(""),N=Object(o.a)(v,2),x=N[0],w=N[1],k=Object(s.useState)(null),y=Object(o.a)(k,2),S=y[0],B=y[1],M=Object(s.useState)(null),P=Object(o.a)(M,2),C=P[0],T=P[1];return Object(s.useEffect)((function(){j().then((function(e){c(e.data)})).catch((function(e){B(e.message),setTimeout((function(){B(null)}),5e3)}))}),[]),Object(i.jsxs)("div",{className:"ui container",children:[Object(i.jsx)("h1",{className:"ui header",children:"PhoneBok"}),Object(i.jsx)(r,{placeholder:"Filter names...",filter:x,setFilter:w}),Object(i.jsx)(p,{phoneBook:n,setPhoneBook:c,newName:d,setNewName:m,phoneNumber:f,setPhoneNumber:g,setErrorMessage:B,setSuccessMessage:T}),Object(i.jsx)(u,{message:C,errorMessage:S}),Object(i.jsx)(O,{title:"Numbers",filter:x,phoneBook:n,setPhoneBook:c,setSuccessMessage:T})]})};a.a.render(Object(i.jsx)(g,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.526e867b.chunk.js.map